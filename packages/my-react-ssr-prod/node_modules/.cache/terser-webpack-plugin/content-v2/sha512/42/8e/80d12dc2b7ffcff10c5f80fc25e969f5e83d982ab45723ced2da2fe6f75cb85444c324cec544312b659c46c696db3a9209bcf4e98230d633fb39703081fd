{"code":"!function(e){var t={};function a(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,\"a\",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p=\"\",a(a.s=12)}([function(e,t){e.exports=require(\"react\")},function(e,t){e.exports=require(\"react-router-dom\")},function(e,t){e.exports=require(\"react-router\")},function(e,t){e.exports=require(\"react-dom/server\")},function(e,t){e.exports=require(\"koa2\")},function(e,t){e.exports=require(\"koa-static\")},function(e,t){e.exports={wdsPort:9002,nodeServerPort:9001,asyncComponentKey:\"__IS_ASYNC_COMP_FLAG__\"}},function(e,t){e.exports=require(\"react-router-config\")},function(e,t){e.exports=require(\"constants\")},function(e,t,a){e.exports=function(){let e=[\"libs.js\",\"main.js\"],t=[\"main.css\"];const i={js:[],css:[]};{const n=a(10);e.forEach(e=>{n[e]&&i.js.push(`<script type=\"text/javascript\"  src=\"${n[e]}\"><\\/script>`)}),t.forEach(e=>{n[e]&&i.css.push(`<link rel=\"stylesheet\" type=\"text/css\" href=\"${n[e]}\" />`)})}return i}},function(e){e.exports=JSON.parse('{\"haha.js\":\"/js/haha.8c5ffe1b.js\",\"main.css\":\"/css/main.ca28e53a.css\",\"main.js\":\"/js/main.bb7b16d8.js\",\"img/img.f9bd91f4.jpg\":\"/img/img.f9bd91f4.jpg\"}')},function(e,t){e.exports=require(\"path\")},function(e,t,a){\"use strict\";a.r(t);var i=a(0),n=a.n(i),r=a(3),o=a(2),c=(a(7),a(1));class s extends n.a.Component{constructor(e){super(e)}render(){return n.a.createElement(\"div\",{className:\"layout-box\"},n.a.createElement(\"h1\",null,\"koa+react+ssr\"),n.a.createElement(c.NavLink,{to:\"/index\",style:{marginLeft:\"10px\"}},\"首页\"),n.a.createElement(c.NavLink,{style:{marginLeft:\"10px\"},to:\"/list\"},\"列表页\"),this.props.children)}}var l=Object(o.withRouter)(s);class d extends n.a.Component{constructor(e){super(e);let t=null;t=e.staticContext.initialData||{},this.state={page:t.page,fetchData:t.fetchData}}static async getInitialProps(){return console.log(\"fetch data index\"),{page:{tdk:{title:\"首页 - react ssr\",keywords:\"前端技术江湖\",description:\"关键词\"}}}}componentDidMount(){this.state.fetchData||d.getInitialProps().then(e=>{this.setState({fetchData:e.fetchData||[],page:e.page}),document.title=e.page.tdk.title}),this.state.page&&this.state.page.tdk&&(document.title=this.state.page.tdk.title)}render(){return n.a.createElement(\"div\",{className:\"page-index-box\"},n.a.createElement(\"p\",null,\"首页\"),n.a.createElement(\"img\",{src:\"/img/img.f9bd91f4.jpg\"}))}}var u=[{title:\"深入浅出TypeScript：从基础知识到类型编程\",desc:\"Vue3 源码及开发必备基础，从基础知识到类型工具设计，从理论到实战，手把手让你从零基础成为进阶使用者。\",img:\"https://user-gold-cdn.xitu.io/2019/11/8/16e4ab5d6aff406a?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"SVG 动画开发实战手册\",desc:\"从0到1，学习SVG动画开发知识，快速高效完成SVG动画效果开发。\",img:\"https://user-gold-cdn.xitu.io/2019/9/26/16d6bda264ac27e4?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"预售JavaScript 设计模式核⼼原理与应⽤实践\",desc:\"通俗易懂的编程“套路“学。带你深入看似高深实则接地气的设计模式原理，在实际场景中内化设计模式的”道“与”术“。学会驾驭代码，而非被其奴役。\",img:\"https://user-gold-cdn.xitu.io/2019/9/16/16d382e623923d91?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"从入门到深入：IM聊天系统前端开发实践\",desc:\"IM聊天为案例，系统性讲解前端核心知识点\",img:\"https://user-gold-cdn.xitu.io/2019/5/27/16af958d3adcf362?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"你不知道的 Chrome 调试技巧\",desc:\"熟练掌握 Chrome 调试技巧，直接提升工作效率。\",img:\"https://user-gold-cdn.xitu.io/2019/1/31/168a1fa41cd01af2?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"WebGL 入门与实践\",desc:\"介绍 WebGL 与 CSS 3D 开发的点点滴滴，详细阐述 3D 数学库的实现原理与使用，演示 3D 数学库对于 WebGL 开发和普通网页开发的重要作用，助力每个前端开发者轻松掌握 3D 开发的关键技术。\",img:\"https://user-gold-cdn.xitu.io/2019/2/25/16922d6d22ff1458?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"基于 ThreeJS 框架的魔方微信小游戏实践\",desc:\"从 0 到 1，一步步带你基于 ThreeJS 实现一个炫酷的魔方微信小游戏\",img:\"https://user-gold-cdn.xitu.io/2019/2/25/16922a9c5a3527fa?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"前端面试之道\",desc:\"助你建立起完整的前端知识架构体系，探究知识的原理，深入了解大厂常考知识点\",img:\"https://user-gold-cdn.xitu.io/2018/12/25/167e14942f2dcf44?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"Vue.js 组件精讲\",desc:\"iView 作者 3 年的 Vue.js 组件开源积累，Vue.js 组件知识深入剖析\",img:\"https://user-gold-cdn.xitu.io/2018/12/18/167c119a41e444d5?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"React 实战：设计模式和最佳实践\",desc:\"深入了解 React 应用中的设计模式，总结业界验证的最佳实践，更进一步，了解React 未来新功能 Suspense 和 Hooks。\",img:\"https://user-gold-cdn.xitu.io/2018/12/4/16779ed4b21a9fa5?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"Vue 项目构建与开发入门\",desc:\"从构建到开发，帮助 Vue 开发者提升项目构建与开发能力，基于 Vue CLI 3\",img:\"https://user-gold-cdn.xitu.io/2018/11/27/16754380a4c1a096?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"Taro 多端开发实现原理与项目实战\",desc:\"剖析 Taro 多端开发框架的实现原理，并通过电商核心的项目实战，帮助开发者快速上手多端项目。\",img:\"https://user-gold-cdn.xitu.io/2018/11/12/16706202cc6428df?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"前端性能优化原理与实践\",desc:\"毫秒必争！深入理解前端性能原理，将晦涩的知识转化为可爱的生产力，建立你自己的优化技能索引目录\",img:\"https://user-gold-cdn.xitu.io/2018/10/23/166a0387b91066b9?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"微信小游戏开发入门：从 0 到 1 实现井字棋游戏\",desc:\"构建自己的第一个微信小游戏，让你的社交和游戏创意变为现实\",img:\"https://user-gold-cdn.xitu.io/2018/9/18/165eb6f3cb9eb04f?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"基于 hapi 的 Node.js 小程序后端开发实践指南\",desc:\"基于 Node.js 搭建敏捷高效的 RESTful 接口服务，走上小程序开发的全栈之路\",img:\"https://user-gold-cdn.xitu.io/2018/9/11/165c7a188e490e48?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"微信小程序开发入门：从 0 到 1 实现天气小程序\",desc:\"从基础到实战，从开发环境搭建到开发、调试、上线，打通小程序开发全流程\",img:\"https://user-gold-cdn.xitu.io/2018/8/29/16584f1faa1c4262?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"React 组合式开发实践：打造企业管理系统五大核心模块\",desc:\"基于 React 的企业管理系统开发经验，带你学习如何抽象复杂业务逻辑，帮助团队实现效能提升\",img:\"https://user-gold-cdn.xitu.io/2018/9/5/165a8a3d93f6ca7d?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"区块链开发入门：从 0 到 1 构建基于以太坊智能合约的 ICO DApp\",desc:\"写给前端开发者的第一本区块链开发入门指南，通过 DApp 开发实战（基于以太坊创始人 V 神的 DAICO 设计思想），深入掌握区块链及以太坊技术\",img:\"https://user-gold-cdn.xitu.io/2018/5/17/1636d772f3d23cf1?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"基于 JavaScript 开发灵活的数据应用\",desc:\"使用 JavaScript、ECharts、Vue.js 等开发工具，完成各种数据结构的处理、转换、动态过滤以及数据可视化的开发。\",img:\"https://user-gold-cdn.xitu.io/2018/4/9/162a9c24e48d274b?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"Web 前端面试指南与高频考题解析\",desc:\"找工作面试是门技术活，掌握一定技巧可以让你事半功倍\",img:\"https://user-gold-cdn.xitu.io/2018/3/5/161f664af48f2400?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"大厂 H5 开发实战手册\",desc:\"京东、腾讯等大厂 H5 开发或 UI 开发工程师的真实实战技巧\",img:\"https://user-gold-cdn.xitu.io/2018/5/9/16342f9666cf9b8f?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"使用 webpack 定制前端开发环境\",desc:\"基于 4.x 版本，从细节和深度上弄懂 webpack，随心所欲定制前端开发环境\",img:\"https://user-gold-cdn.xitu.io/2018/3/2/161e5a0aebdab5ed?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"剖析 Vue.js 内部运行机制\",desc:\"把原理抽象为小 Demo，以一种对新手友好的方式带领读者漫游 Vue.js 的世界\",img:\"https://user-gold-cdn.xitu.io/2018/1/16/160fdc404b36a1a0?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"Git 原理详解及实用指南\",desc:\"让你不仅用上、更用明白的 Git 实用指南\",img:\"https://user-gold-cdn.xitu.io/2017/11/27/15ffbb05174a57f8?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"用 npm script 打造超溜的前端工作流\",desc:\"抛弃笨重的构建工具，拥抱轻巧而不失强大的 npm script，随小册赠送视频版教程。\",img:\"https://user-gold-cdn.xitu.io/2017/11/20/15fd699517c3c6a4?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"},{title:\"如何使用 Canvas 制作出炫酷的网页背景特效\",desc:\"从零开始学习 Canvas 相关知识，分析其特效，最终制作出炫酷的网页背景\",img:\"https://user-gold-cdn.xitu.io/2017/11/20/15fd79563b28dd6e?imageView2/1/w/200/h/280/q/95/format/webp/interlace/1\"}];a(8);class p extends n.a.Component{constructor(e){super(e);let t=null;t=e.staticContext.initialData||{},this.state={page:t.page,fetchData:t.fetchData}}static async getInitialProps(){console.log(\"fetch data\");return{fetchData:await new Promise(e=>{setTimeout(()=>{e({code:0,data:u})},100)}),page:{tdk:{title:\"列表页 - react ssr\",keywords:\"前端技术江湖\",description:\"关键词\"}}}}componentDidMount(){this.state.fetchData||p.getInitialProps().then(e=>{this.setState({fetchData:e.fetchData||[],page:e.page}),document.title=e.page.tdk.title}),this.state.page&&this.state.page.tdk&&(document.title=this.state.page.tdk.title)}render(){const{code:e,data:t}=this.state.fetchData||{};return n.a.createElement(\"div\",null,t&&t.map((e,t)=>n.a.createElement(\"div\",{key:t},n.a.createElement(\"h3\",null,e.title),n.a.createElement(\"p\",null,e.desc))),!t&&n.a.createElement(\"div\",null,\"暂无数据\"))}}var m=[{path:\"/\",component:d,exact:!0},{path:\"/index\",component:d,exact:!0},{path:\"/list\",component:p,exact:!0},{path:\"*\",component:function(){return React.createElement(\"div\",null,\"404页面\")},exact:!0}];n.a.createContext({});n.a.Component;function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function f(){return n.a.createElement(\"div\",null,\"404拉 \")}var h=function({routeList:e}){return n.a.createElement(l,null,n.a.createElement(c.Switch,null,e.map(e=>e.initialData?n.a.createElement(c.Route,{key:e.path,exact:e.exact,path:e.path,render:t=>(t.initialData=e.initialData,n.a.createElement(e.component,t))}):n.a.createElement(c.Route,g({key:e.path},e))),n.a.createElement(c.Route,{to:\"*\",component:f})))};const w=a(9);var b=a(4),x=a.n(b),y=a(5),V=a.n(y),v=(a(11),a(6));const j=a.n(v).a.nodeServerPort||Object({NODE_ENV:\"production\"}).PORT,q=new x.a;q.use(V()(\"./dist/static\")),q.use(async(e,t)=>{console.log(\"production\"),console.log(\"string\"),console.log(!0),console.log(\"boolean\"),console.log(\"====\");const a=e.request.path;if(a.indexOf(\".\")>-1)return e.body=null,t();console.log(\"ctx.request.path\",e.request.path);let i=((e,t)=>{let a,i;for(var n of t)if(i=Object(o.matchPath)(e,n),i){a=n;break}return{targetRoute:a,targetMatch:i}})(a,m),{targetRoute:c,targetMatch:s}=i,l=c.component.getInitialProps,d={};l&&(d=await l());let{page:u}=d||{},p={title:\"默认标题 - my react ssr\",keywords:\"默认关键词\",description:\"默认描述\"};u&&u.tdk&&(p=u.tdk);const g={initialData:d},f=Object(r.renderToString)(n.a.createElement(o.StaticRouter,{location:a,context:g},n.a.createElement(h,{routeList:m}))),b=w();e.body=`<!DOCTYPE html>\\n<html lang=\"en\">\\n<head>\\n    <meta charset=\"UTF-8\">\\n    <title>${p.title}</title>\\n    <meta name=\"keywords\" content=\"${p.keywords}\" />\\n    <meta name=\"description\" content=\"${p.description}\" />\\n     ${b.css.join(\"\")}\\n</head>\\n<body>\\n    <div id=\"root\">\\n       ${f}\\n    </div>\\n    <textarea id=\"ssrTextInitData\" style=\"display:none;\">\\n    ${JSON.stringify(d)}\\n    </textarea>\\n</body>\\n</html>\\n ${b.js.join(\"\")}\\n`,await t()}),q.listen(j),console.log(\"server is start .\",`http://localhost:${j}`)}]);","extractedComments":[]}