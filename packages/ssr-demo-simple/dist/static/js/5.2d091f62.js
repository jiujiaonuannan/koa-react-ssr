(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{270:function(t,n,e){"use strict";e(129),e(271);var a=e(279),f=e.n(a),i=e(280),h=e.n(i),r=e(281),d=e.n(r),s=e(282),m=e.n(s),c=e(283),v=e.n(c),o=e(284),u=e.n(o),l=e(285),p=e.n(l),k=e(286),w=e.n(k),_=e(287),g=e.n(_),I=e(266),b=e.n(I),x=(e(264),e(267)),y=e.n(x),D=e(36),P=e.n(D),E=e(37),N=e.n(E),S=e(38),A=e.n(S),C=e(39),T=e.n(C),j=e(40),F=e.n(j),H=e(0),L=e.n(H);function O(n,t){var e=w()(n);if(p.a){var a=p()(n);t&&(a=u()(a).call(a,function(t){return v()(n,t).enumerable})),e.push.apply(e,a)}return e}var J=null,R=!1,U=!1,M=function M(){J&&J.getInitialProps&&(R=!0,U&&J.getInitialProps())};n.a=function(p){return function(t){function e(t){var n;return P()(this,e),(n=A()(this,T()(e).call(this,t))).state={initialData:{},canClientFetch:!1},n}var n,a,i;return F()(e,t),N()(e,[{key:"getInitialProps",value:(i=y()(b.a.mark(function s(){var n,e,a,i,r;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.props,e=n.match,a=n.location,p.getInitialProps)return t.next=4,p.getInitialProps({match:e,location:a});t.next=7;break;case 4:t.t0=t.sent,t.next=8;break;case 7:t.t0={};case 8:i=t.t0,this.setState({initialData:i,canClientFetch:!0}),(r=i.page.tdk)&&(document.title=r.title);case 13:case"end":return t.stop()}},s,this)})),function r(){return i.apply(this,arguments)})},{key:"componentDidMount",value:(a=y()(b.a.mark(function c(){return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(U=!0,window.__IS__SSR__&&(J=this,window.addEventListener("popstate",M),R&&this.getInitialProps()),this.props.history&&"PUSH"===this.props.history.action||!window.__IS__SSR__)return t.next=7,this.getInitialProps();t.next=7;break;case 7:case"end":return t.stop()}},c,this)})),function o(){return a.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){U=R=!1}},{key:"render",value:function(){var t=function r(n){for(var t=1;t<arguments.length;t++){var e,a=null!=arguments[t]?arguments[t]:{};if(t%2)m()(e=O(Object(a),!0)).call(e,function(t){g()(n,t,a[t])});else if(d.a)h()(n,d()(a));else{var i;m()(i=O(Object(a))).call(i,function(t){f()(n,t,v()(a,t))})}}return n}({initialData:{}},this.props);return this.state.canClientFetch?t.initialData=this.state.initialData||{}:(t.initialData=window.__INITIAL_DATA__,window.__INITIAL_DATA__=null),L.a.createElement(p,t)}}],[{key:"getInitialProps",value:(n=y()(b.a.mark(function u(n){return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(p.getInitialProps)return t.next=3,p.getInitialProps(n);t.next=6;break;case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0={};case 7:return t.abrupt("return",t.t0);case 8:case"end":return t.stop()}},u)})),function l(t){return n.apply(this,arguments)})}]),e}(L.a.Component)}},272:function(t,n,e){"use strict";n.a={apiHost:"http://mockssr.bigerfe.com"}},362:function(t,n,e){"use strict";e.r(n);var a=e(266),i=e.n(a),r=(e(264),e(267)),s=e.n(r),c=e(0),o=e.n(c),u=(e(259),e(270)),l=e(288),p=e.n(l),f=e(272),h=e(107),d=e.n(h),m=e(36),v=e.n(m),k=e(37),w=e.n(k),_=e(38),g=e.n(_),I=e(39),b=e.n(I),x=e(40),y=e.n(x),D=e(41),P=(e(260),function(t){function n(t){return v()(this,n),g()(this,b()(n).call(this,t))}return y()(n,t),w()(n,[{key:"render",value:function(){var t=this.props.list,n=void 0===t?[]:t;return o.a.createElement("div",{className:"book-list"},d()(n).call(n,function(t){return o.a.createElement("div",{key:t.id,className:"item"},o.a.createElement("p",{className:"img"}),o.a.createElement("div",{className:"right"},o.a.createElement("p",{className:"title"},o.a.createElement(D.b,{to:"/detail/"+t.id},t.title)),o.a.createElement("p",{className:"des"},t.des)))}))}}]),n}(o.a.Component));function E(t){var n=(t.initialData||{}).fetchData;return o.a.createElement("div",{className:"page-index-box"},o.a.createElement(P,{list:n}))}E.getInitialProps=function(){var n=s()(i.a.mark(function a(t){var n,e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.get("".concat(f.a.apiHost,"/list")).then(function(t){return t.data})["catch"](function(t){});case 2:return n=t.sent,e=0===n.code?n.data:[],t.abrupt("return",{fetchData:e,page:{tdk:{title:"首页 - koa-react-ssr",keywords:"关键词 - koa-react-ssr",description:"描述"}}});case 5:case"end":return t.stop()}},a)}));return function(t){return n.apply(this,arguments)}}();n["default"]=Object(u.a)(E)}}]);