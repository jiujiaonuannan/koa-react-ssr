exports.ids=[2],exports.modules={26:function(t,e,a){"use strict";var i=a(0),n=a.n(i);let s=null,o=!1,c=!1;const l=()=>{s&&s.getInitialProps&&(console.log("popStateFn"),o=!0,c&&s.getInitialProps())};e.a=t=>(class extends n.a.Component{constructor(t){super(t),this.state={initialData:{},canClientFetch:!1}}static async getInitialProps(e){return t.getInitialProps?await t.getInitialProps(e):{}}async getInitialProps(){const{match:e,location:a}=this.props,i=t.getInitialProps?await t.getInitialProps({match:e,location:a}):{};this.setState({initialData:i,canClientFetch:!0}),console.log("getInitialProps");let{tdk:n}=i.page;n&&(document.title=n.title)}async componentDidMount(){c=!0,window.__IS__SSR__&&(s=this,window.addEventListener("popstate",l),o&&this.getInitialProps());const t=this.props.history&&"PUSH"===this.props.history.action;console.log("canClientFetch",t),!t&&window.__IS__SSR__||await this.getInitialProps()}componentWillUnmount(){console.log("unmount"),o=!1,c=!1}render(){const e={initialData:{},...this.props};return e.initialData=this.props.staticContext.initialData||{},n.a.createElement(t,e)}})},27:function(t,e,a){"use strict";e.a={apiHost:"http://mockssr.bigerfe.com"}},28:function(t,e,a){"use strict";a.r(e);var i=a(0),n=a.n(i),s=a(4),o=a(26),c=a(25),l=a.n(c),r=a(27);class p extends n.a.Component{constructor(t){super(t)}render(){const{list:t=[]}=this.props;return n.a.createElement("div",{className:"book-list"},t.map(t=>n.a.createElement("div",{key:t.id,className:"item"},n.a.createElement("p",{className:"img"}),n.a.createElement("div",{className:"right"},n.a.createElement("p",{className:"title"},n.a.createElement(s.Link,{to:"/detail/"+t.id},t.title)),n.a.createElement("p",{className:"des"},t.des)))))}}function m(t){console.log("props",t);const{fetchData:e}=t.initialData||{};return n.a.createElement("div",{className:"page-index-box"},n.a.createElement(p,{list:e}))}m.getInitialProps=async t=>{let e=await l.a.get(`${r.a.apiHost}/list`).then((function(t){return t.data})).catch((function(t){console.log(t)}));return{fetchData:0===e.code?e.data:[],page:{tdk:{title:"首页 - koa-react-ssr",keywords:"关键词 - koa-react-ssr",description:"描述"}}}};e.default=Object(o.a)(m)}};